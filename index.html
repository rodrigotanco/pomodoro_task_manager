<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçÖ Pomodoro Timer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff6b6b">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjAiIGZpbGw9IiNmZjZiNmIiLz4KPHN2ZyB4PSIxNiIgeT0iMTYiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+CjxyZWN0IHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNiI+8J+NhTwvcmVjdD4KPC9zdmc+Cjwvc3ZnPgo=">
</head>
<body>
    <div class="container">
        <header>
            <h1>üçÖ Pomodoro Timer</h1>
            <div class="header-buttons">
                <a href="user-guide.html" class="help-btn">üìñ User Guide</a>
                <button id="settingsBtn" class="settings-btn">‚öôÔ∏è Settings</button>
            </div>
        </header>

        <div id="settingsPanel" class="settings-panel hidden">
            <h3>Settings</h3>
            <div class="setting-group">
                <label for="workDuration">Work Duration (minutes):</label>
                <input type="number" id="workDuration" min="1" max="60" value="25">
            </div>
            <div class="setting-group">
                <label for="breakDuration">Break Duration (minutes):</label>
                <input type="number" id="breakDuration" min="1" max="30" value="5">
            </div>
            <div class="setting-group">
                <label for="userEmail">Email for Reports:</label>
                <input type="email" id="userEmail" placeholder="your@email.com">
            </div>
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="enableNotifications" checked>
                    Enable Desktop Notifications
                </label>
                <small>Get browser notifications when timer completes</small>
            </div>
            <div class="setting-group">
                <label for="googleSheetsWebhook">Google Apps Script Webhook URL (optional):</label>
                <input type="url" id="googleSheetsWebhook" placeholder="https://script.google.com/macros/s/your-script-id/exec">
                <small>Deploy the provided Google Apps Script and paste the webhook URL here</small>
            </div>
            <div class="setting-group">
                <button id="setupGoogleSheets" class="btn-secondary">üìã Setup Instructions</button>
                <!-- <button id="testConnection" class="btn-secondary">üîç Test Connection</button> -->
                <small>Setup instructions for Google Sheets integration</small>
            </div>
            <button id="saveSettings" class="btn-primary">Save Settings</button>
        </div>

        <main>
            <div class="timer-section">
                <div class="timer-display">
                    <div id="timeLeft" class="time">25:00</div>
                    <div id="sessionType" class="session-type">Work Session</div>
                    <div id="progressBar" class="progress-bar">
                        <div id="progress" class="progress"></div>
                    </div>
                </div>

                <div class="timer-controls">
                    <button id="startBtn" class="btn-primary" disabled>Start</button>
                    <button id="pauseBtn" class="btn-secondary" disabled>Pause</button>
                    <button id="resetBtn" class="btn-secondary">Reset</button>
                </div>

                <div id="timerActions" class="timer-actions hidden">
                    <button id="completeTaskBtn" class="btn-complete hidden">‚úÖ Complete Task</button>
                    <button id="skipBreakBtn" class="btn-skip hidden">‚è≠Ô∏è Skip Break</button>
                </div>

                <div class="session-info">
                    <div class="session-counter">
                        <span>Sessions Completed: </span>
                        <span id="sessionCount">0</span>
                    </div>
                    <div class="current-task">
                        <span>Current Task: </span>
                        <span id="currentTaskName">No task selected</span>
                    </div>
                </div>
            </div>

            <div class="tasks-section">
                <h2>Tasks</h2>
                <div class="task-input">
                    <input type="text" id="taskInput" placeholder="Add a new task...">
                    <button id="addTaskBtn" class="btn-primary">Add</button>
                </div>

                <!-- Bulk Actions Bar -->
                <div id="bulkActionsBar" class="bulk-actions-bar hidden">
                    <div class="bulk-actions-left">
                        <input type="checkbox" id="selectAllTasks" class="task-checkbox-main">
                        <span id="selectedCount">0 selected</span>
                    </div>
                    <div class="bulk-actions-right">
                        <button id="bulkDeleteBtn" class="bulk-action-btn delete-btn" disabled>
                            üóëÔ∏è Delete Selected
                        </button>
                        <button id="bulkArchiveBtn" class="bulk-action-btn archive-btn" disabled>
                            üì¶ Archive Selected
                        </button>
                        <button id="cancelSelectionBtn" class="bulk-action-btn cancel-btn">
                            ‚úñÔ∏è Cancel
                        </button>
                    </div>
                </div>

                <div id="tasksList" class="tasks-list"></div>

                <!-- Bulk Select Toggle Button -->
                <button id="bulkSelectToggle" class="bulk-select-toggle">
                    ‚òëÔ∏è Select Tasks
                </button>
            </div>

            <div class="stats-section">
                <h2>Today's Progress</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="todayTasks">0</div>
                        <div class="stat-label">Tasks Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todaySessions">0</div>
                        <div class="stat-label">Work Sessions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayTime">0m</div>
                        <div class="stat-label">Focus Time</div>
                    </div>
                </div>
                <div class="report-actions">
                    <button id="sendReportBtn" class="btn-secondary">üìß Send Report Now</button>
                    <button id="syncNowBtn" class="btn-secondary">üîÑ Sync Now</button>
                </div>
                <div class="sync-status">
                    <div id="syncStatusIndicator" class="sync-indicator">
                        <span id="syncStatusIcon">‚ö™</span>
                        <span id="syncStatusText">Ready to sync</span>
                        <span id="syncLastTime" class="sync-time"></span>
                    </div>
                    <div id="statsSyncStatus" class="sync-indicator stats-sync">
                        <span>üìä Stats: </span>
                        <span id="statsSyncText">Not synced</span>
                        <span id="statsSyncLastTime" class="sync-time"></span>
                    </div>
                </div>
            </div>

            <div class="activity-log">
                <h3>Recent Activity</h3>
                <div id="activityList" class="activity-list"></div>
            </div>
        </main>
    </div>

    <audio id="alarmSound" preload="auto" loop>
        <source src="data:audio/wav;base64,UklGRiYMAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIMAACD/4P/g/+D/4P/g/+D/1z/XP9c/1z/XP9c/1z/NP80/zT/NP80/zT/NP8N/w3/Df8N/w3/Df8N/+f+5/7n/uf+5/7n/ub+wv7C/sL+wv7C/sL+wv6e/p7+nv6e/p7+nv6e/nv+e/57/nv+e/57/nv+WP5Y/lj+WP5Y/lj+WP42/jb+Nv42/jb+Nv42/hX+Ff4V/hX+Ff4V/hX+9f31/fX99f31/fX99f3W/db91v3W/db91v3W/bj9uP24/bj9uP24/bj9m/2b/Zv9m/2b/Zv9m/1//X/9f/1//X/9f/1//WP9Y/1j/WP9Y/1j/WP9SP1I/Uj9SP1I/Uj9SP0z/TP9M/0z/TP9M/0z/RX9Ff0V/RP9E/0T/RP9+Pz4/Pj8+Pz4/Pj8+Pzf/N/83/zf/N/83/zf/Mb8xvzG/Mb8xvzG/Mb8rvyu/K78rvyu/K78rvyX/Jf8l/yX/Jf8l/yX/IH8gfyB/IH8gfyB/IH8bPxs/Gz8bPxs/Gz8bPxY/Fj8WPxY/Fj8WPxY/ET8RPxE/ET8RPxE/ET8MfwxDj8OPw4/Dj8OPw4/+v76/vr++v76/vr++v7n/uf+5/7n/uf+5/7n/tT+1P7U/tT+1P7U/tT+wv7C/sL+wv7C/sL+wv6w/rD+sP6w/rD+sP6w/p7+nv6e/p7+nv6e/p7+jf6N/o3+jf6N/o3+jf58/nz+fP58/nz+fP58/mv+a/5r/mv+a/5r/mv+W/5b/lv+W/5b/lv+W/5L/kv+S/5L/kv+S/5L/jz+PP48/jz+PP48/jz+Lf4t/i3+Lf4t/i3+Lf4f/h/+H/4f/h/+H/4f/hH+Ef4R/hH+Ef4R/hH+BP4E/gT+BP4E/gT+BP73/ff99/33/ff99/33/er96v3q/er96v3q/er93v3e/d793v3e/d793v3S/dL90v3S/dL90v3S/cb9xv3G/cb9xv3G/cb9uv26/br9uv26/br9uv2v/a/9r/2v/a/9r/2v/aT9pP2k/aT9pP2k/aT9mf2Z/Zn9mf2Z/Zn9mf2P/Y/9j/2P/Y/9j/2P/YX9hf2F/YX9hf2F/YX9e/17/Xv9e/17/Xv9e/1y/XL9cv1y/XL9cv1y/Wn9af1p/Wn9af1p/Wn9YP1g/WD9YP1g/WD9YP1Y/Vj9WP1Y/Vj9WP1Y/VD9UP1Q/VD9UP1Q/VD9SP1I/Uj9SP1I/Uj9SP1A/UD9QP1A/UD9QP1A/Tn9Of05/Tn9Of05/Tn9Mf0x/TH9Mf0x/TH9Mf0q/Sr9Kv0q/Sr9Kv0q/SL9Iv0i/SL9Iv0i/SL9G/0b/Rv9G/0b/Rv9G/0U/RT9FP0U/RT9FP0U/Q39Df0N/Q39Df0N/Q39Bv0G/Qb9Bv0G/Qb9Bv0A/QD9AP0A/QD9AP0A/fr8+vz6/Pr8+vz6/Pr89Pz0/PT89Pz0/PT89PzuvO687rzuvO687rzuvOi86Lzovei86Lzovei84rzivOK84rzivOK84rzc/Nz83Pzc/Nz83Pzc/Nb81vzW/Nb81vzW/Nb80PzQ/ND80PzQ/ND80PzK/Mr8yvzK/Mr8yvzK/MT8xPzE/MT8xPzE/MT8vvy+/L78vvy+/L78vvy4/Lj8uPy4/Lj8uPy4/LL8svy/LL8svy/LL8svy/LL8qvyq/Kr8qvyq/Kr8qvyi/KL8ovyi/KL8ovyi/Jb8lvyW/Jb8lvyW/Jb8k/yT/JP8k/yT/JP8k/yR/JH8kfyR/JH8kfyR/JA8kDyQPJA8kDyQPJA8jnyOfI58jnyOfI58jnyM/Iz8jPyM/Iz8jPyM/It8i3yLfIt8i3yLfIt8ifyJ/In8ifyJ/In8ifyIfIh8iHyIfIh8iHyIfIb8hvyG/Ib8hvyG/Ib8hXyFfIV8hXyFfIV8hXyEPIQ8hDyEPIQ8hDyEPIK8gryEPIK8gryEPIK8gXyBfIF8gXyBfIF8gXy//8A//8A//8A//8A//8A//8=" type="audio/wav">
    </audio>

    <!-- Setup Instructions Modal -->
    <div id="setupModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã Google Sheets Setup Instructions</h2>
                <button id="closeModal" class="close-btn" onclick="window.pomodoroTimer.hideSetupModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setup-steps">
                    <h3>Step 1: Create/Open Your Google Sheet</h3>
                    <p>Open the Google Sheet where you want to track your Pomodoro data.</p>

                    <h3>Step 2: Add Apps Script</h3>
                    <p>In your Google Sheet, go to <strong>Extensions ‚Üí Apps Script</strong></p>

                    <h3>Step 3: Copy the Script Code</h3>
                    <button id="copyScriptBtn" class="btn-primary copy-btn">üìã Copy Apps Script Code</button>
                    <p><small>This will copy the complete Google Apps Script code to your clipboard</small></p>

                    <h3>Step 4: Paste and Save</h3>
                    <p>‚Ä¢ Delete any existing code in the Apps Script editor<br>
                    ‚Ä¢ Paste the copied code<br>
                    ‚Ä¢ Save the project (name it "Pomodoro Sync")</p>

                    <h3>Step 5: Deploy as Web App</h3>
                    <p>‚Ä¢ Click <strong>Deploy ‚Üí New Deployment</strong><br>
                    ‚Ä¢ Type: <strong>Web app</strong><br>
                    ‚Ä¢ Execute as: <strong>Me</strong><br>
                    ‚Ä¢ Who has access: <strong>Anyone</strong><br>
                    ‚Ä¢ Click <strong>Deploy</strong></p>

                    <h3>Step 6: Copy Webhook URL</h3>
                    <p>Copy the web app URL and paste it in the webhook field above, then save settings.</p>

                    <div class="success-message">
                        ‚úÖ Done! Your Pomodoro data will automatically sync to Google Sheets!
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Canvas Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"
            crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>
</html>